<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý Tài khoản - Quản trị</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/accounts.css">
    <link rel="stylesheet" href="css/sidebar.css">
</head>
<body>
    <div class="page-container">
        <!-- Sidebar -->
        <aside id="sidebar-placeholder" class="sidebar"></aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <h2 id="content-title">Quản lý Tài khoản</h2>
                <div class="user-info">
                    <p>Xin chào, <strong id="user-display-name">Admin</strong></p>
                    <img src="https://placehold.co/40x40/E2E8F0/4A5568?text=A" alt="Avatar" class="avatar" id="user-avatar">
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Tab Buttons -->
                <div class="tab-container">
                    <button id="tab-staff" class="tab-btn active" data-target="panel-staff">
                        <i class="bi bi-briefcase-fill"></i> Nhân viên
                    </button>
                    <button id="tab-customer" class="tab-btn" data-target="panel-customer">
                        <i class="bi bi-person-fill"></i> Khách hàng
                    </button>
                </div>

                <!-- Tab Panels -->
                <div id="panels">
                    <!-- Nhân viên -->
                    <div id="panel-staff" class="tab-panel active">
                        <div class="card">
                            <div class="card-header-action">
                                <h3>Danh sách nhân viên</h3>
                                <button id="add-staff-btn" class="btn btn-primary">
                                    <i class="bi bi-plus-lg"></i> Thêm nhân viên
                                </button>
                            </div>

                            <div class="card-search">
                                <i class="bi bi-search"></i>
                                <input type="text" id="search-staff-input" placeholder="Tìm kiếm theo tên đăng nhập hoặc họ tên...">
                            </div>

                            <div class="table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Tên đăng nhập</th>
                                            <th>Họ và tên</th>
                                            <th>Vai trò</th>
                                            <th>Trạng thái</th>
                                            <th class="text-center">Hành động</th>
                                        </tr>
                                    </thead>
                                    <tbody id="staff-table-body">
                                        <tr id="staff-loading-row">
                                            <td colspan="5" class="text-center">Đang tải dữ liệu nhân viên...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Khách hàng -->
                    <div id="panel-customer" class="tab-panel">
                        <div class="card">
                            <div class="card-header-action">
                                <h3>Danh sách khách hàng</h3>
                            </div>

                            <div class="card-search">
                                <i class="bi bi-search"></i>
                                <input type="text" id="search-customer-input" placeholder="Tìm kiếm theo tên đăng nhập hoặc họ tên...">
                            </div>

                            <div class="table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Tên đăng nhập</th>
                                            <th>Họ và tên</th>
                                            <th>Số điện thoại</th>
                                            <th>Trạng thái</th>
                                            <th class="text-center">Hành động</th>
                                        </tr>
                                    </thead>
                                    <tbody id="customer-table-body">
                                        <tr id="customer-loading-row">
                                            <td colspan="5" class="text-center">Đang tải dữ liệu khách hàng...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <template id="staff-activity-template">
    <div class="customer-detail-modal">


        <!-- Tabs -->
        <div class="detail-tabs">
            <div class="tab-buttons">
                <button class="tab-btn-active" data-tab="booking-tab">
                    <i class="bi bi-calendar-check"></i> Lịch Sử Đặt Phòng
                </button>
                <button class="tab-btn-active" data-tab="payment-tab">
                    <i class="bi bi-receipt"></i> Thanh Toán
                </button>
                <button class="tab-btn-active" data-tab="compensation-tab">
                    <i class="bi bi-tools"></i> Đền Bù
                </button>
            </div>

                <!-- Lịch Sử Đặt Phòng -->
                <div class="tab-pane-active" id="booking-tab">
                    <div class="table-container">
                        <table class="detail-table">
                            <thead>
                                <tr>
                                    <th>Mã Đặt</th>
                                    <th>Khách Hàng</th>
                                    <th>Ngày Nhận</th>
                                    <th>Ngày Trả</th>
                                    <th>Tình Trạng</th>
                                    <th class="text-end">Tổng Tiền</th>
                                </tr>
                            </thead>
                            <tbody id="booking-body"></tbody>
                        </table>
                    </div>
                    <div class="summary-bar">
                        <strong>Tổng doanh thu: <span id="total-booking">0₫</span></strong>
                    </div>
                </div>

                <!-- Thanh Toán -->
                <div class="tab-pane-active" id="payment-tab">
                    <div class="table-container">
                        <table class="detail-table">
                            <thead>
                                <tr>
                                    <th>Mã TT</th>
                                    <th>Ngày Thanh Toán</th>
                                    <th class="text-end">Số Tiền</th>
                                    <th>Trạng Thái</th>
                                </tr>
                            </thead>
                            <tbody id="payment-body"></tbody>
                        </table>
                    </div>
                    <div class="summary-bar success">
                        <strong>Tổng thu: <span id="total-payment">0₫</span></strong>
                    </div>
                </div>

                <!-- Đền Bù -->
                <div class="tab-pane-active" id="compensation-tab">
                    <div class="table-container">
                        <table class="detail-table">
                            <thead>
                                <tr>
                                    <th>Mã Đền Bù</th>
                                    <th>Mã đặt phòng</th>
                                    <th>Thiết Bị</th>
                                    <th>SL</th>
                                    <th class="text-end">Tiền Đền</th>
                                </tr>
                            </thead>
                            <tbody id="compensation-body"></tbody>
                        </table>
                    </div>
                    <div class="summary-bar danger">
                        <strong>Tổng đền bù: <span id="total-compensation">0₫</span></strong>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>


<!-- TEMPLATE CHI TIẾT KHÁCH HÀNG (mới, siêu đẹp) -->
<template id="customer-detail-template">
    <div class="customer-detail-modal">
        <div class="detail-tabs">
            <div class="tab-buttons">
                <button class="tab-btn-active active" data-tab="info-tab">Thông tin</button>
                <button class="tab-btn-active" data-tab="booking-tab">Lịch sử đặt phòng</button>
            </div>
            <div class="tab-content">
                <div class="tab-pane-active active" id="info-tab">
<div style="
    display: grid;
    /* 2 cột bằng nhau */
    grid-template-columns: 1fr 1fr; 
    gap: 15px; /* Khoảng cách giữa các mục */
    padding: 10px; 
    background-color: #f8f9fa; /* Nền nhẹ nhàng cho toàn bộ khối */
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.08);
">

    <div style="
        background-color: #ffffff; 
        border-radius: 6px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.06);
        padding: 12px 15px;
        font-size: 15px;
        display: flex;
        align-items: center;
        border-left: 5px solid #2196f3; /* Viền màu xanh */
    ">
        <strong style="color: #495057; margin-right: 10px;">MÃ KH:</strong> 
        <span id="detail-makh" style="font-weight: 600; color: #333;"></span>
    </div>

    <div style="
        background-color: #ffffff;
        border-radius: 6px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.06);
        padding: 12px 15px;
        font-size: 15px;
        display: flex;
        align-items: center;
        border-left: 5px solid #4caf50; /* Viền màu xanh lá */
    ">
        <strong style="color: #495057; margin-right: 10px;">HỌ TÊN:</strong> 
        <span id="detail-hoten" style="font-weight: 600; color: #333;"></span>
    </div>

    <div style="
        background-color: #ffffff;
        border-radius: 6px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.06);
        padding: 12px 15px;
        font-size: 15px;
        display: flex;
        align-items: center;
        border-left: 5px solid #ff9800; /* Viền màu cam */
    ">
        <strong style="color: #495057; margin-right: 10px;">CCCD:</strong> 
        <span id="detail-cccd" style="font-weight: 600; color: #333;"></span>
    </div>

    <div style="
        background-color: #ffffff;
        border-radius: 6px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.06);
        padding: 12px 15px;
        font-size: 15px;
        display: flex;
        align-items: center;
        border-left: 5px solid #f44336; /* Viền màu đỏ */
    ">
        <strong style="color: #495057; margin-right: 10px;">SĐT:</strong> 
        <span id="detail-sdt" style="font-weight: 600; color: #333;"></span>
    </div>

    <div style="
        background-color: #ffffff;
        border-radius: 6px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.06);
        padding: 12px 15px;
        font-size: 15px;
        display: flex;
        align-items: center;
        border-left: 5px solid #00bcd4; /* Viền màu xanh biển */
    ">
        <strong style="color: #495057; margin-right: 10px;">EMAIL:</strong> 
        <span id="detail-email" style="font-weight: 600; color: #333;"></span>
    </div>

    <div style="
        background-color: #ffffff;
        border-radius: 6px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.06);
        padding: 12px 15px;
        font-size: 15px;
        display: flex;
        align-items: center;
        border-left: 5px solid #e91e63; /* Viền màu hồng */
    ">
        <strong style="color: #495057; margin-right: 10px;">NGÀY SINH:</strong> 
        <span id="detail-ngaysinh" style="font-weight: 600; color: #333;"></span>
    </div>

    <div style="
        background-color: #ffffff;
        border-radius: 6px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.06);
        padding: 12px 15px;
        font-size: 15px;
        display: flex;
        align-items: center;
        border-left: 5px solid #9c27b0; /* Viền màu tím */
        grid-column: span 2; /* Chiếm 2 cột */
    ">
        <strong style="color: #495057; margin-right: 10px;">ĐỊA CHỈ:</strong> 
        <span id="detail-diachi" style="font-weight: 600; color: #333; flex-grow: 1; text-align: right;"></span>
    </div>

    <div style="
        background-color: #ffffff;
        border-radius: 6px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.06);
        padding: 12px 15px;
        font-size: 15px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-left: 5px solid #00acc1; /* Viền màu xanh ngọc */
    ">
        <strong style="color: #495057;">TRẠNG THÁI:</strong> 
        <span id="detail-trangthai" class="badge bg-success" style="
            min-width: 90px; 
            text-align: center; 
            font-size: 13px; 
            padding: 5px 8px; 
            border-radius: 4px; 
            background-color: #28a745 !important;
            color: white;
        "></span>
    </div>

</div>
                </div>
                <div class="tab-pane-active" id="booking-tab">
                    <table class="detail-table">
                        <thead><tr><th>Mã đặt</th><th>Phòng</th><th>Ngày nhận</th><th>Ngày trả</th><th>Trạng thái</th><th class="text-end">Tiền</th></tr></thead>
                        <tbody id="detail-booking-body"></tbody>
                    </table>
                    <div class="summary-bar"><strong>Tổng chi: <span id="detail-total-booking">0₫</span></strong></div>
                </div>
            </div>
        </div>
    </div>
</template>

    <!-- Modal -->
    <div id="modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Chi tiết tài khoản</h3>
                <button id="modal-close-btn" class="modal-close-btn">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
            <div id="modal-body" class="modal-body">
                <!-- Nội dung modal được JS chèn vào -->
            </div>
        </div>
    </div>

    <script src="js/main.js" type="module" defer></script>
    <script src="js/accounts.js" type="module" defer></script>
    <script src="../letan/api/customers.js"></script>
    <script src="../letan/api/navigation-preloader.js"></script>
    <script src="../letan/js/profile-modal.js"></script>
</body>
</html>