<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản Lý Khách Hàng - Lễ Tân</title>
    <link rel="stylesheet" href="css/letan_dashboard.css">
    <link rel="stylesheet" href="css/customers.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">
            <i class="fas fa-hotel"></i>
            <h2>Lễ Tân</h2>
        </div>
        <nav class="nav-menu">
            <a href="letan_dashboard.html" class="nav-item">
                <i class="fas fa-chart-line"></i>
                <span>Tổng Quan</span>
            </a>
            <a href="checkin.html" class="nav-item">
                <i class="fas fa-calendar-check"></i>
                <span>Check-in</span>
            </a>
            <a href="checkout.html" class="nav-item">
                <i class="fas fa-door-open"></i>
                <span>Check-out</span>
            </a>
            <a href="services.html" class="nav-item">
                <i class="fas fa-concierge-bell"></i>
                <span>Dịch Vụ</span>
            </a>
            <a href="rooms_management.html" class="nav-item">
                <i class="fas fa-bed"></i>
                <span>Quản Lý Phòng</span>
            </a>
            <a href="booking.html" class="nav-item">
                <i class="fas fa-calendar-alt"></i>
                <span>Đặt Phòng</span>
            </a>
            <a href="room_change.html" class="nav-item">
                <i class="fas fa-exchange-alt"></i>
                <span>Đổi Phòng</span>
            </a>
            <a href="customers.html" class="nav-item active">
                <i class="fas fa-users"></i>
                <span>Khách Hàng</span>
            </a>
        </nav>
        <div class="sidebar-footer">
            <a href="#" class="nav-item" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i>
                <span>Đăng Xuất</span>
            </a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <h1>Quản Lý Khách Hàng</h1>
            </div>
            <div class="header-right">
                <div class="user-profile">
                    <i class="fas fa-user-circle"></i>
                    <span id="userName">Nhân Viên</span>
                </div>
            </div>
        </header>

        <!-- Customer Management Content -->
        <div class="customer-content">
            <!-- Statistics Cards -->
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalCustomers">0</h3>
                        <p>Tổng Khách Hàng</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                        <i class="fas fa-user-check"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="activeCustomers">0</h3>
                        <p>Khách Đang Lưu Trú</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="vipCustomers">0</h3>
                        <p>Khách VIP</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="monthlyCustomers">0</h3>
                        <p>Khách Mới Tháng Này</p>
                    </div>
                </div>
            </div>

            <!-- Search and Filter Section -->
            <div class="card search-filter-section">
                <div class="section-header">
                    <h3><i class="fas fa-search"></i> Tìm Kiếm & Lọc</h3>
                    <button class="btn btn-primary" id="addCustomerBtn">
                        <i class="fas fa-plus"></i> Thêm Khách Hàng
                    </button>
                </div>
                <div class="search-filter-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="searchKeyword">Từ Khóa</label>
                            <input type="text" id="searchKeyword" placeholder="Tên, SĐT, Email, CCCD...">
                        </div>
                        <div class="form-group">
                            <label for="filterGender">Giới Tính</label>
                            <select id="filterGender">
                                <option value="">Tất cả</option>
                                <option value="Nam">Nam</option>
                                <option value="Nữ">Nữ</option>
                                <option value="Khác">Khác</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="filterStatus">Trạng Thái</label>
                            <select id="filterStatus">
                                <option value="">Tất cả</option>
                                <option value="active">Đang lưu trú</option>
                                <option value="inactive">Không lưu trú</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="sortBy">Sắp Xếp</label>
                            <select id="sortBy">
                                <option value="newest">Mới nhất</option>
                                <option value="oldest">Cũ nhất</option>
                                <option value="name-asc">Tên A-Z</option>
                                <option value="name-desc">Tên Z-A</option>
                                <option value="visits">Lượt lưu trú</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <button type="button" id="searchBtn" class="btn btn-primary">
                                <i class="fas fa-search"></i> Tìm Kiếm
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customers List Section -->
            <div class="card customers-list-section">
                <div class="section-header">
                    <h3><i class="fas fa-list"></i> Danh Sách Khách Hàng (<span id="customerCount">0</span>)</h3>
                    <div class="view-options">
                        <button class="view-btn active" data-view="grid" title="Xem dạng lưới">
                            <i class="fas fa-th"></i>
                        </button>
                        <button class="view-btn" data-view="list" title="Xem dạng danh sách">
                            <i class="fas fa-list"></i>
                        </button>
                    </div>
                </div>

                <!-- Grid View -->
                <div id="customersGrid" class="customers-grid">
                    <!-- Customer cards will be loaded here -->
                </div>

                <!-- List View -->
                <div id="customersList" class="customers-list" style="display: none;">
                    <table class="customers-table">
                        <thead>
                            <tr>
                                <th>Mã KH</th>
                                <th>Họ Tên</th>
                                <th>CCCD/CMND</th>
                                <th>Số Điện Thoại</th>
                                <th>Email</th>
                                <th>Giới Tính</th>
                                <th>Lượt Lưu Trú</th>
                                <th>Trạng Thái</th>
                                <th>Thao Tác</th>
                            </tr>
                        </thead>
                        <tbody id="customersTableBody">
                            <!-- Table rows will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination" id="pagination">
                    <!-- Pagination will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Customer Detail Modal -->
    <div class="modal" id="customerDetailModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3><i class="fas fa-user"></i> Thông Tin Khách Hàng</h3>
                <button class="close-btn" onclick="closeCustomerDetailModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="customer-detail-tabs">
                    <button class="tab-btn active" data-tab="info">
                        <i class="fas fa-info-circle"></i> Thông Tin
                    </button>
                    <button class="tab-btn" data-tab="history">
                        <i class="fas fa-history"></i> Lịch Sử Lưu Trú
                    </button>
                    <button class="tab-btn" data-tab="stats">
                        <i class="fas fa-chart-bar"></i> Thống Kê
                    </button>
                </div>

                <!-- Info Tab -->
                <div class="tab-content active" id="infoTab">
                    <div class="customer-info-grid" id="customerInfoGrid">
                        <!-- Customer info will be loaded here -->
                    </div>
                </div>

                <!-- History Tab -->
                <div class="tab-content" id="historyTab">
                    <div class="booking-history" id="bookingHistory">
                        <!-- Booking history will be loaded here -->
                    </div>
                </div>

                <!-- Stats Tab -->
                <div class="tab-content" id="statsTab">
                    <div class="customer-stats" id="customerStats">
                        <!-- Customer statistics will be loaded here -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCustomerDetailModal()">
                    <i class="fas fa-times"></i> Đóng
                </button>
                <button class="btn btn-primary" id="editCustomerBtn">
                    <i class="fas fa-edit"></i> Chỉnh Sửa
                </button>
            </div>
        </div>
    </div>

    <!-- Edit Customer Modal -->
    <div class="modal" id="editCustomerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-edit"></i> <span id="editModalTitle">Chỉnh Sửa Thông Tin</span></h3>
                <button class="close-btn" onclick="closeEditCustomerModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="editCustomerForm">
                    <input type="hidden" id="editCustomerId">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editHoten">Họ Tên <span class="required">*</span></label>
                            <input type="text" id="editHoten" required>
                        </div>
                        <div class="form-group">
                            <label for="editCccd">CCCD/CMND <span class="required">*</span></label>
                            <input type="text" id="editCccd" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editSdt">Số Điện Thoại <span class="required">*</span></label>
                            <input type="tel" id="editSdt" required>
                        </div>
                        <div class="form-group">
                            <label for="editEmail">Email</label>
                            <input type="email" id="editEmail">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editGioitinh">Giới Tính</label>
                            <select id="editGioitinh">
                                <option value="">Chọn giới tính</option>
                                <option value="Nam">Nam</option>
                                <option value="Nữ">Nữ</option>
                                <option value="Khác">Khác</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editNgaysinh">Ngày Sinh</label>
                            <input type="date" id="editNgaysinh">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="editDiachi">Địa Chỉ</label>
                            <input type="text" id="editDiachi">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="editGhichu">Ghi Chú</label>
                            <textarea id="editGhichu" rows="3"></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeEditCustomerModal()">
                    <i class="fas fa-times"></i> Hủy
                </button>
                <button class="btn btn-primary" id="saveCustomerBtn">
                    <i class="fas fa-save"></i> Lưu
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="spinner"></div>
        <p>Đang tải dữ liệu...</p>
    </div>

    <!-- Scripts -->
    <script src="api/customers.js"></script>
    <script src="api/navigation-preloader.js"></script>
</body>

</html>